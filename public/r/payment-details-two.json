{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "payment-details-two",
  "type": "registry:block",
  "title": "Payment Details Two",
  "description": "A comprehensive payment details form component with card details, billing information, and country selection built using React Hook Form and custom validation",
  "dependencies": [
    "lucide-react",
    "react-hook-form",
    "motion",
    "country-state-city"
  ],
  "registryDependencies": [
    "button",
    "card",
    "input",
    "label",
    "select",
    "textarea",
    "utils"
  ],
  "files": [
    {
      "path": "src/registry/billingsdk/payment-details-two.tsx",
      "content": "\"use client\"\n\nimport { useForm } from \"react-hook-form\"\nimport { Input } from \"@/components/ui/input\"\nimport { Label } from \"@/components/ui/label\"\nimport { Textarea } from \"@/components/ui/textarea\"\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\nimport { detectCardType, formatCardNumber, formatExpiryDate, validateLuhn } from \"@/utils/card-validation\"\nimport { Check, CreditCard, Shield } from \"lucide-react\"\nimport { useState, useEffect } from \"react\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { motion, AnimatePresence } from 'motion/react'\nimport {Country, State, City} from 'country-state-city'\n\n\nexport interface PaymentFormData {\n  nameOnCard?: string\n  cardNumber?: string\n  validTill?: string\n  cvv?: string\n  firstName?: string\n  middleLastName?: string\n  country?: string\n  state?: string\n  city?: string\n  billingAddress?: string\n  pinCode?: string\n  contactNumber?: string\n  general?: string\n}\n\nconst CardLogo = ({ type }: { type: string }) => {\n  switch (type) {\n    case \"visa\":\n      return <div className=\"flex items-center justify-center w-10 h-5 bg-blue-600 rounded text-white text-xs font-bold\">VISA</div>\n    case \"mastercard\":\n      return <div className=\"flex items-center\"><div className=\"w-5 h-5 bg-red-500 rounded-full\"></div><div className=\"w-5 h-5 bg-orange-400 rounded-full -ml-2\"></div></div>\n    case \"amex\":\n      return <div className=\"flex items-center justify-center w-10 h-6 bg-blue-500 rounded text-white text-xs font-bold\">AMEX</div>\n    case \"rupay\":\n      return <div className=\"flex items-center justify-center w-10 h-5 bg-green-600 rounded text-white text-xs font-bold\">RuPay</div>\n    case \"discover\":\n      return <div className=\"flex items-center justify-center w-10 h-6 bg-orange-600 rounded text-white text-xs font-bold\">DISC</div>\n    default:\n      return <CreditCard className=\"w-5 h-5 text-muted-foreground\" />\n  }\n}\n\nexport function PaymentDetailsTwo({\n  className,\n  onSubmit,\n  onDiscard,\n  countries ,\n  states,\n  cities,\n}: {\n  className?: string\n  onSubmit?: (data: PaymentFormData) => void\n  onDiscard?: () => void,\n  countries? :{ name: string; isoCode: string }[]\n  states? : { name: string; isoCode: string }[],\n  cities ?: { name: string}[],\n}) {\n  const [cardType, setCardType] = useState(\"\")\n  const [isSaved, setIsSaved] = useState(false)\n  const [defaultCountries, setDefaultCountries] = useState<{ name: string; isoCode: string }[]>([])\n  const [defaultStates, setDefaultStates] = useState<{ name: string; isoCode: string }[]>([])\n  const [defaultCities, setDefaultCities] = useState<{ name: string }[]>([])\n  const [selectedCountry , setSelectedCountry] = useState<string>(\"\")\n  const [selectedState , setSelectedState] = useState<string>(\"\")\n\n  const { register, handleSubmit, setValue, reset,  formState: { errors, isSubmitting } } = useForm<PaymentFormData>({\n    defaultValues: {\n      nameOnCard: \"\",\n      cardNumber: \"\",\n      validTill: \"\",\n      cvv: \"\",\n      firstName: \"\",\n      middleLastName: \"\",\n      country: \"\",\n      state: \"\",\n      city: \"\",\n      billingAddress: \"\",\n      pinCode: \"\",\n      contactNumber: \"\",\n    },\n  })\n\n  useEffect(() => {\n    // fetch all countries\n    if(countries && countries?.length > 0){\n      setDefaultCountries(countries)\n    }else{\n      const countryData = Country.getAllCountries()\n      setDefaultCountries(countryData)\n    }\n  }, [])\n\n  useEffect(()=>{  \n    if(states && states.length > 0){\n      setDefaultStates(states)\n    }\n    else{\n        const stateData =  State.getStatesOfCountry(selectedCountry)\n        setDefaultStates(stateData)\n    }\n  },[selectedCountry])\n  \n\n  useEffect(() => {\n\n    if(cities && cities.length > 0){\n      setDefaultCities(cities)\n    }\n    else{\n      const cityData = City.getCitiesOfState(selectedCountry ,selectedState)\n      setDefaultCities(cityData)\n    }\n   \n  }, [selectedCountry, selectedState])\n\n\n  const handleFormSubmit = async (data: PaymentFormData) => {\n    if (!onSubmit) return;\n    try {\n      await onSubmit(data);\n      setIsSaved(true);\n    } catch (err) {\n      console.error(err);\n    }\n  };\n\n  const handleDiscardClick = () => {\n    if (onDiscard) {\n      onDiscard();\n    } else {\n      reset();\n      setIsSaved(false);\n    }\n  };\n\n  const formatAndSetCard = (val: string) => {\n    const raw = val.replace(/\\s+/g, \"\")\n    const formatted = formatCardNumber(raw)\n    setValue(\"cardNumber\", formatted)\n    setCardType(detectCardType(formatted))\n  }\n\n  return (\n    <form onSubmit={handleSubmit(handleFormSubmit)} className={cn(\" max-w-2xl  w-full mx-auto space-y-6\", className)}>\n      {/* Card Section */}\n      <div className=\"flex flex-col border  rounded-lg gap-6 p-6 bg-card/50 shadow-md\">\n        <h2 className=\"text-lg font-medium text-center\">Card Details</h2>\n\n        <div>\n          <Label className=\" md:text-[15px] font-medium\">Name on card</Label>\n          <Input\n            className=\"mb-1.5 mt-1.5 shadow-md !bg-card focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary focus-visible:ring-[2px] md:text-[15px]\"\n            placeholder=\"Placeholder name\"\n            {...register(\"nameOnCard\", { required: \"Name is required\" })}\n          />\n          {errors.nameOnCard && <p className=\"text-red-500 text-sm\">{errors.nameOnCard.message}</p>}\n        </div>\n\n        <div>\n          <Label className=\" md:text-[15px] font-medium\">Card number</Label>\n          <div className=\"relative flex items-center\">\n            <div className=\"absolute left-3\"><CardLogo type={cardType} /></div>\n            <Input\n              className=\"mb-1.5 mt-1.5 pl-14 shadow-md !bg-card focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary focus-visible:ring-[2px] md:text-[15px]\"\n              placeholder=\"1234 5678 9012 3456\"\n              maxLength={20}\n              inputMode=\"numeric\"\n              pattern=\"[0-9 ]*\"\n              {...register(\"cardNumber\", {\n                required: \"Card number is required\",\n                validate: (val) => val ? validateLuhn(val) : \"Invalid card number\"\n              })}\n              onChange={(e) => formatAndSetCard(e.target.value)}\n            />\n          </div>\n          {errors.cardNumber && <p className=\"text-red-500 text-sm\">{errors.cardNumber.message}</p>}\n        </div>\n\n        <div className=\"flex gap-6\">\n          <div className=\"w-full\">\n            <Label className=\" md:text-[15px] font-medium\">Expiry</Label>\n            <Input\n              className=\"mb-1.5 mt-1.5 shadow-md !bg-card focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary focus-visible:ring-[2px] md:text-[15px]\"\n              placeholder=\"MM/YY\"\n              {...register(\"validTill\", {\n                required: \"Valid expiry date is required (MM/YY)\",\n                validate: (val?: string) => {\n                  if (!val) return \"Valid expiry date is required (MM/YY)\";\n                  if (!/^\\d{2}\\/\\d{2}$/.test(val)) return \"Invalid format (MM/YY)\";\n                  const [mm, yy] = val.split(\"/\").map(Number);\n                  if (mm < 1 || mm > 12) return \"Invalid month\";\n                  const now = new Date();\n                  const expiry = new Date(2000 + yy, mm - 1, 1);\n                  if (expiry < now) return \"Card expired\";\n                  return true;\n                },\n              })}\n              onChange={(e) => setValue(\"validTill\", formatExpiryDate(e.target.value))}\n            />\n            {errors.validTill && <p className=\"text-red-500 text-sm\">{errors.validTill.message}</p>}\n          </div>\n          <div className=\"w-full\">\n            <Label className=\" md:text-[15px] font-medium\">CVV</Label>\n            <div className=\"relative\">\n              <Shield className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground\" />\n              <Input\n                type=\"password\"\n                className=\"mb-1.5 mt-1.5 pl-8 shadow-md !bg-card focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary focus-visible:ring-[2px] md:text-[15px]\"\n                placeholder=\"123\"\n                maxLength={4}\n                inputMode=\"numeric\"\n                pattern=\"[0-9 ]*\"\n                {...register(\"cvv\", {\n                  required: \"Valid CVV is required\",\n                  validate: (val) =>\n                    (cardType === \"amex\" ? val?.length === 4 : val?.length === 3) ||\n                    \"Invalid CVV length\",\n                })}\n              />\n            </div>\n            {errors.cvv && <p className=\"text-red-500 text-sm\">{errors.cvv.message}</p>}\n          </div>\n        </div>\n      </div>\n\n      <div className=\"w-full border-t \"></div>\n\n      {/* Billing Section */}\n      <div className=\"flex flex-col border bg-card/50 rounded-lg gap-6 pt-4 px-6 pb-6 shadow-md \">\n        <h2 className=\"text-lg font-medium pb-2 text-center\">Billing Details</h2>\n\n        <div className=\"flex flex-col md:flex-row gap-6\">\n          <div className=\"w-full\">\n            <Label className=\" md:text-[15px] font-medium\">Firstname</Label>\n            <Input\n              className=\"mb-1.5 mt-1.5 shadow-md !bg-card focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary focus-visible:ring-[2px] md:text-[15px]\"\n              placeholder=\"Firstname\"\n              {...register(\"firstName\", { required: \"Required\" })}\n            />\n            {errors.firstName && <p className=\"text-red-500 text-sm\">{errors.firstName.message}</p>}\n          </div>\n          <div className=\"w-full\">\n            <Label className=\" md:text-[15px] font-medium\">Lastname</Label>\n            <Input\n              className=\"mb-1.5 mt-1.5 shadow-md !bg-card focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary focus-visible:ring-[2px] md:text-[15px]\"\n              placeholder=\"Lastname\"\n              {...register(\"middleLastName\", { required: \"Required\" })}\n            />\n            {errors.middleLastName && <p className=\"text-red-500 text-sm\">{errors.middleLastName.message}</p>}\n          </div>\n        </div>\n\n        <div className=\"flex flex-col md:flex-row gap-6\">\n          <div className=\"w-full\">\n            <Label className=\"md:text-[15px] font-medium\">Country</Label>\n            <Select onValueChange={(val) => {setValue(\"country\", val) \n              setSelectedCountry(val)\n            }}>\n              <SelectTrigger className=\"mb-1.5 mt-1.5 w-full shadow-md !bg-card focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary focus-visible:ring-[2px] md:text-[15px]\">\n                <SelectValue placeholder=\"Select country \" />\n              </SelectTrigger>\n              <SelectContent>\n                {defaultCountries.map((c) => <SelectItem key={c.isoCode} value={c.isoCode}>{c.name}</SelectItem>)}\n              </SelectContent>\n            </Select>\n          </div>\n\n          <div className=\"w-full\">\n            <Label className=\"md:text-[15px] font-medium\">State</Label>\n            <Select onValueChange={(val) => {setValue(\"state\", val) \n            setSelectedState(val)\n            }}>\n              <SelectTrigger className=\"mb-1.5 mt-1.5 shadow-md w-full !bg-card focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary focus-visible:ring-[2px] md:text-[15px]\">\n                <SelectValue placeholder=\"Select state\" />\n              </SelectTrigger>\n              <SelectContent>\n                {defaultStates.length > 0 ? defaultStates.map((s) => <SelectItem key={s.isoCode} value={s.isoCode}>{s.name} </SelectItem>) : <SelectItem disabled value=\"No state found\">No state found</SelectItem>}\n              </SelectContent>\n            </Select>\n          </div>\n\n          <div className=\"w-full\">\n            <Label className=\"md:text-[15px] font-medium\">City</Label>\n            <Select onValueChange={(val) => setValue(\"city\", val)}>\n              <SelectTrigger className=\"mb-1.5 mt-1.5 shadow-md w-full !bg-card focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary focus-visible:ring-[2px] md:text-[15px]\">\n                <SelectValue placeholder=\"Select city\" />\n              </SelectTrigger>\n              <SelectContent>\n                {defaultCities.length > 0 ? defaultCities.map((c) => <SelectItem key={c.name} value={c.name}>{c.name}</SelectItem>):<SelectItem disabled value=\"No city found\">No city found</SelectItem>}\n              </SelectContent>\n            </Select>\n          </div>\n        </div>\n\n        <div>\n          <Label className=\"md:text-[15px] font-medium\">Billing Address</Label>\n          <Textarea\n            className=\"mb-1.5 mt-1.5 shadow-md !bg-card focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary focus-visible:ring-[2px] md:text-[15px]\"\n            placeholder=\"Enter Billing Address\"\n            {...register(\"billingAddress\", { required: \"Required\" })}\n          />\n          {errors.billingAddress && <p className=\"text-red-500 text-sm\">{errors.billingAddress.message}</p>}\n        </div>\n\n        <div className=\"flex flex-col md:flex-row gap-6\">\n          <div className=\"w-full\">\n            <Label className=\"md:text-[15px] font-medium\">Pincode</Label>\n            <Input\n              className=\"mb-1.5 mt-1.5 shadow-md !bg-card focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary focus-visible:ring-[2px] md:text-[15px]\"\n              placeholder=\"110024\"\n              {...register(\"pinCode\", {\n                required: \"Required\",\n                pattern: { value: /^[0-9]{6}$/, message: \"Invalid pincode\" },\n              })}\n            />\n            {errors.pinCode && <p className=\"text-red-500 text-sm\">{errors.pinCode.message}</p>}\n          </div>\n\n          <div className=\"w-full\">\n            <Label className=\"md:text-[15px] font-medium\">Mobile</Label>\n            <Input\n              className=\"mb-1.5 mt-1.5 shadow-md !bg-card focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary focus-visible:ring-[2px] md:text-[15px]\"\n              placeholder=\"9991023558\"\n              {...register(\"contactNumber\", {\n                required: \"Required\",\n                pattern: { value: /^[0-9]{10}$/, message: \"Invalid number\" },\n              })}\n            />\n            {errors.contactNumber && <p className=\"text-red-500 text-sm\">{errors.contactNumber.message}</p>}\n          </div>\n        </div>\n      </div>\n\n      <div className=\"flex justify-center mb-4\">\n        <div className=\"flex items-center justify-end gap-3 pt-2\">\n          <Button type=\"button\" variant=\"outline\" onClick={handleDiscardClick} disabled={isSubmitting}>\n            Discard\n          </Button>\n          <Button type=\"submit\" disabled={isSubmitting || isSaved} className=\"flex items-center justify-center gap-2\">\n            <AnimatePresence mode=\"wait\" initial={false}>\n              {isSubmitting ? (\n                <motion.div key=\"saving\" initial={{ opacity: 0, x: -10 }} animate={{ opacity: 1, x: 0 }} exit={{ opacity: 0, x: 10 }} className=\"flex items-center gap-2\">\n                  <div className=\"w-5 h-5 border border-background border-t-transparent rounded-full animate-spin\" />\n                  <span>Saving</span>\n                </motion.div>\n              ) : isSaved ? (\n                <motion.div key=\"saved\" initial={{ scale: 0 }} animate={{ scale: 1 }} exit={{ scale: 0 }} className=\"flex items-center gap-2\">\n                  <div className=\"w-5 h-5 border bg-green-200 rounded-full flex items-center justify-center\">\n                    <Check className=\"w-4 h-4 text-green-600\" />\n                  </div>\n                  <span>Saved</span>\n                </motion.div>\n              ) : (\n                <motion.span key=\"default\" initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }}>\n                  Save Changes\n                </motion.span>\n              )}\n            </AnimatePresence>\n          </Button>\n        </div>\n      </div>\n    </form>\n  )\n}\n",
      "type": "registry:component",
      "target": "components/billingsdk/payment-details-two.tsx"
    },
    {
      "path": "src/registry/billingsdk/demo/payment-details-two-demo.tsx",
      "content": "\"use client\"\n\nimport { PaymentDetailsTwo, type PaymentFormData } from \"@/components/billingsdk/payment-details-two\";\n\n\nexport function PaymentDetailsTwoDemo() {\n\n  //Function that handles onSubmit in the Form\n  const handleSubmit = async (_data: PaymentFormData) => {\n    // _data contains all the form values entered by the user:\n    // e.g., _data.cardNumber, _data.nameOnCard, _data.validTill, _data.cvv, _data.firstName, etc.\n    // You can use this object to make an API call to your backend, for example:\n    // await fetch('/api/payment', { method: 'POST', body: JSON.stringify(_data) })\n\n    return await new Promise((resolve) => {\n      setTimeout(() => {\n        console.log(\"Handle Submit Function\")\n        resolve('The promise is resolved')\n      }, 3000)\n    })\n  }\n\n\n  //Function that handles onCancel in the Form\n  const handleDiscard = () => {\n    console.log(\"The Discard Function\")\n  }\n\n  return (\n    <PaymentDetailsTwo\n      onSubmit={handleSubmit}\n      onDiscard={handleDiscard}\n    />\n  )\n}\n",
      "type": "registry:component",
      "target": "components/payment-details-two-demo.tsx"
    },
    {
      "path": "src/utils/card-validation.ts",
      "content": "\n// Detect card type\nexport const detectCardType = (\n  cardNumber: string\n): \"visa\" | \"mastercard\" | \"amex\" | \"rupay\" | \"diners\" | \"discover\" | \"unknown\" => {\n  const number = cardNumber.replace(/\\s/g, \"\")\n\n  if (/^4/.test(number)) return \"visa\"\n  if (/^3[47]/.test(number)) return \"amex\"\n  if (/^3(?:0[0-5]|09|095|6|8)/.test(number)) return \"diners\"\n  if (/^5[1-5]/.test(number) || /^222[1-9]/.test(number) || /^22[3-9]\\d/.test(number) || /^2[3-6]\\d{2}/.test(number) || /^27[0-1]\\d/.test(number) || /^2720/.test(number)) return \"mastercard\"\n  if (/^6011/.test(number) || /^65/.test(number) || /^64[4-9]/.test(number) || /^622(?:12[6-9]|1[3-9]\\d|[2-8]\\d{2}|9[0-1]\\d|92[0-5])/.test(number)) return \"discover\"\n  if (/^60/.test(number) || /^81/.test(number) || /^82/.test(number) || /^508/.test(number)) return \"rupay\"\n\n  return \"unknown\"\n}\n\n// Luhn algorithm\nexport const validateLuhn = (cardNumber: string): true | string => {\n  const number = cardNumber.replace(/\\s/g, \"\")\n  if (!number || !/^\\d+$/.test(number)) return \"Invalid card number\"\n\n  let sum = 0\n  let shouldDouble = false\n\n  for (let i = number.length - 1; i >= 0; i--) {\n    let digit = parseInt(number.charAt(i))\n    if (shouldDouble) {\n      digit *= 2\n      if (digit > 9) digit -= 9\n    }\n    sum += digit\n    shouldDouble = !shouldDouble\n  }\n\n  return sum % 10 === 0 ? true : \"Invalid card number\"\n}\n\n\n\n/**\n * Formats a card number by adding spaces every 4 digits\n * @param value - The raw card number input\n * @returns The formatted card number with spaces\n */\nexport const formatCardNumber = (value: string): string => {\n  const number = value.replace(/\\s/g, \"\").replace(/[^0-9]/gi, \"\")\n  const matches = number.match(/\\d{4,16}/g)\n  const match = (matches && matches[0]) || \"\"\n  const parts = []\n\n  for (let i = 0, len = match.length; i < len; i += 4) {\n    parts.push(match.substring(i, i + 4))\n  }\n\n  if (parts.length) {\n    return parts.join(\" \")\n  } else {\n    return number\n  }\n}\n\n\n/**\n * Formats an expiry date of the card\n * @param value - The raw card expiry input\n * @returns The formatted expiry date with / in between\n */\nexport const formatExpiryDate = (value ?: string): string => {\n  if (!value) return \"\"\n  const number = value.replace(/\\D/g, \"\")\n  if (number.length >= 2) {\n    return number.substring(0, 2) + \"/\" + number.substring(2, 4)\n  }\n  return number\n}\n\n",
      "type": "registry:component",
      "target": "utils/card-validation.ts"
    }
  ]
}